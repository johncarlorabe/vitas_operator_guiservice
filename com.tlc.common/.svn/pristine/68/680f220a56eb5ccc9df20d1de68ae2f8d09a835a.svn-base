package com.tlc.common;

import java.text.DateFormat;
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.util.Date;

public class ThreadSafeDateFormat{
	private ThreadLocal<DateFormat> localdateformat;
	
	public ThreadSafeDateFormat(final String format){
		localdateformat = new ThreadLocal<DateFormat>(){
			@Override
			protected DateFormat initialValue() {
				return new SimpleDateFormat(format);
			}

			@Override
			public DateFormat get() {
				return super.get();
			}

			@Override
			public void set(DateFormat paramT) {
				super.set(paramT);
			}

			@Override
			public void remove() {
				super.remove();
			}
		};
	}
	
	public synchronized String format(Date dt){
		return localdateformat.get().format(dt);
	}
	
	public synchronized Date parse(String dt) throws ParseException{
		return localdateformat.get().parse(dt);
	}
}
